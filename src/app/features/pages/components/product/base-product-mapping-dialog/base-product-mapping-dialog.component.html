<div>
  <mat-icon class="close" style="cursor: pointer;" (click)="closeDialog()">clear</mat-icon>
  <h1 mat-dialog-title>
    基本产品管理
  </h1>
  <div class="overflow-auto formTable">
    <form [formGroup]="userTable">
      <table class="table mat-elevation-z5">
        <thead class="text-nowrap">
          <th>产品</th>
          <th>数量</th>
          <th></th>
        </thead>
        <tbody>
          <ng-container formArrayName="tableRows" *ngFor="let group of this.getFormControls().controls; let i = index">
            <tr [formGroupName]="i">
              <td>
                <app-search-selection
                  [data]="1"
                  formControlName="product"
                  [selectionPlaceholder]="group.value['productName']"
                  [isShowLabel]="true"
                  [isRequiredValidator]="true"
                  [isBaseProduct]="true"
                ></app-search-selection>
              </td>
              <td>
                <mat-form-field appearance="outline" floatLabel="never">
                  <input matInput type="number" formControlName="count" />
                </mat-form-field>
              </td>
              <td>
                <button class="mat-icon-button" mat-stroked-button (click)="deleteRow(i)">
                  <div class="mat-icon-div">
                    <mat-icon>delete_forever</mat-icon>
                  </div>
                </button>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
      <!--      <div>-->
      <!--        {{ this.getFormControls().value | json }}-->
      <!--      </div>-->
      <div class="action-container">
        <button mat-raised-button type="button" (click)="addRow()" color="warn">
          Add row
        </button>
        <button mat-raised-button [disabled]="userTable.invalid" type="submit" (click)="submitForm()" color="warn">
          Save
        </button>
      </div>
    </form>
  </div>
</div>
